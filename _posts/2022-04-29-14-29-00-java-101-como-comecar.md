---
title: Entendendo as threads
published: true
description: VocÃª sabe o que Ã© o mÃ­nimo que vocÃª precisa saber pra desenvolver Java? Aqui eu vou mostrar um pouco de como criar um programa "production ready".
tags: [Java]
cover_image: /assets/images/java/duke-cheers.png
series: Java 101
permalink: /posts/java-101
publish_date: 2021-11-23 16:47:00 +0300
---

Nos Ãºltimos meses muitas pessoas vem me perguntando por onde comeÃ§ar a desenvolver Java. Eu sei que existem vÃ¡rios cursos na internet que tem essa resposta e nÃ£o quero me propor a criar um curso Java. Creio que o conhecimento deve ser livre e sem escasses. Por isso vou te apresentar o bÃ¡sico que vocÃª deve saber sobre Java.

Eu vou tentar seguir a ordem dessa thread que fiz em dezembro.

{% twitter https://twitter.com/vepo/status/1473250093742571521 %}

# Java Ã© um ecossistema

Muitos tendem a querer comparar Java com outras linguagens. Alguns tem a pretensÃ£o de comparar Java com linguagens como Javascript ou mesmo Scala. Esse Ã© um erro crasso! Java nÃ£o Ã© apenas uma linguagem, mas um ecossistema.

Primeiro para entender melhor vamos tentar definir o que Ã© uma linguagem de programaÃ§Ã£o...

Quando a computaÃ§Ã£o eletrÃ´nica comeÃ§ou a se popularizar, existiam inÃºmeras plataformas e cada uma delas haviam um conjunto de instruÃ§Ãµes. Para desenvolver qualquer software era preciso conhecer o hardware e o conjunto de instruÃ§Ãµes que existem naquele hardware. Quer ver um exemplo? Tenta navegar no [cÃ³digo da Apollo 11](https://github.com/chrislgarry/Apollo-11) para tentar entender algo. Ã‰ praticamente impossÃ­vel, atÃ© mesmo para quem jÃ¡ desenvolveu em Assembly. Isso acontece porque o cojunto de instruÃ§Ãµes e a arquitetura do hardware sÃ£o completamente diferentes das mÃ¡quinas que temos hoje.

![Olha o cÃ³digo da igniÃ§Ã£o da Apolo 11! ğŸ˜²](/assets/images/apollo11.png)

Com o tempo as mÃ¡quinas ganharam um padrÃ£o, tanto de processadores como de Opcodes. Hoje sabemos que existe um processador, um barramento, memÃ³ria, registradores, etc... Esses componentes variam um pouco de arquitetura pra arquitetura, mas eles continuam seguindo um padrÃ£o. Abaixo vocÃª pode ver a documentaÃ§Ã£o de um opcode.

![Exemplo de Opcode](/assets/images/opcode.png)

_â€” Cara qual a relaÃ§Ã£o disso com Java?_

Bom, vamos lÃ¡! Eu vou chegar lÃ¡! Eu prometo! Tudo que um computador reconhece sÃ£o opcodes! Nenhum computador entende nenhuma linguagem de programaÃ§Ã£o. Ah, mas vocÃª vai me dizer que algumas pessoas desenvolvem assembly... Sim! Mas mesmo para quem faz esses progamas Ã© preciso transcrever o programa em linguagem de mÃ¡quina. Por exemplo, no opcode acima, o computador nÃ£o sabe o que Ã© `NOP`, ele sÃ³ sabe que a operaÃ§Ã£o `01` nÃ£o deve produzir nenhum efeito. EntÃ£o todo programa precisa ser compilado para uma sÃ©rie de instruÃ§Ãµes que chegam a praticamente o formato de mÃ¡quina. Estou falando do famoso `EXE` do Windows. Mas esses programas tambÃ©m dependem de uma sÃ©rie de bibliotecas do sistema operacional para o qual foram compilados.

AtÃ© 1990 era comum um programa ser compilado para uma mÃ¡quina especifica. Quem jÃ¡ trabalhou com Linux nos anos 2000 sabe o que Ã© isso. MAS uma grande empresa do Vale do SilÃ­cio teve uma grande ideia! E se escrevÃªssemos uma linguagem em que ao se escrever um cÃ³digo ele poderÃ¡ ser executado em qualquer lugar? 

Essa ideia era pensada porque comeÃ§avam a existir dispositivos que no futuro poderiam ter um processador de uso genÃ©rico. Mas como fazer para encapsular toda a lÃ³gica do hardware e do sistema operacional? Por isso surgiu algo que Ã© tÃ£o importante quanto a linguagem Java: a **Java Virtual Machine**! Ou JVM para os mais intimos...

A JVM Ã© um programa que lÃª um conjunto de classes e executa como se fosse um processador em alto nÃ­vel. Ela tem uma arquitetura como se fosse uma mÃ¡quina e tem instruÃ§Ãµes como se fosse um processador. A [especificaÃ§Ã£o](https://docs.oracle.com/javase/specs/jvms/se18/html/index.html) dela Ã© aberta e pode ser acessada por qualquer fornecedor que queira porta ela em seu sistema operacional. 

EntÃ£o agora para e olha para o transformador que existe na sua rua... E se eu te dissesse que Ã© provavel que existe uma JVM rodando perto dele para monitora ele? VocÃª acreditaria? Em algumas cidades existe. Isso sÃ³ Ã© possÃ­vel porque ela Ã© portÃ¡til em qualquer sistema operacional. 

Para criar o Java, foi preciso criar uma mÃ¡quina virtual poderosa e Ã© ela quem tem grande parte do crÃ©dito porque ao abstrair as particularidades de vÃ¡rios sistemas operacionais e hardwares, foi possÃ­vel se econimizar tempo escrevendo cÃ³digo.

_â€” EntÃ£o vocÃª tÃ¡ falando que o Java Ã© famoso sÃ³ por causa da JVM?_

Ã“bvio que nÃ£o! A JVM jÃ¡ vem com uma biblioteca padrÃ£o que Ã© muito poderosa. Podemos ter acesso a biblioteca de coleÃ§Ãµes que Ã© poderosa, a biblioteca de Reflections foi a base da grande maioria dos frameworks dos anos 2000, etc... A JVM era poderosa e ela era umbilicalmente ligada ao Java. Ela era tÃ£o boa que surgiram linguagens que compilavam para rodar JVM.

_â€” Mas porque tudo tem que ser um objeto em Java? Quem teve essa idÃ©ia infeliz?_

Eu poderia colocar essa pergunta como um _ageÃ­smo_, mas eu prefiro o tempo _esnobismo cronolÃ³gico_. Porque vocÃª estÃ¡ certo! Na minha humilde opiniÃ£o, essa idÃ©ia Ã© infeliz! Mas sabemos disso porque a linguagem Java nos mostrou isso. Quando ela foi desenvolvida a crenÃ§a comum era de que OrientaÃ§Ã£o Objeto era a panaceia para todos os males da computaÃ§Ã£o. Se quiser reclamar, pode! Houveram atÃ© ideias bem horrendas como Bando de Dados OO.

AlÃ©m disso houveram projetos para que os componentes fosse a principal forma de desenvolvimento de software. Na Ã©poca existia um grande esforÃ§o para que nÃ£o fosse mais necessÃ¡rio se escrever cÃ³digo. Por isso existiu um projeto, o qual nÃ£o lembro o nome, que prometia um software altamente customizavel sem cÃ³digo. Nem preciso dizer que ele falhou completamente, mas dele surgiram algumas boas ideias como o Java Beans. 

Java Beans Ã© uma especificaÃ§Ã£o que deu origem ao que conhecemos hoje como Jakarta EE. Ã‰ o falecido Java EE! Ã‰ um modelo de programaÃ§Ã£o em que seu cÃ³digo nÃ£o fica dependente de um framework, da mesma forma que seu cÃ³digo nÃ£o Ã© dependente de uma mÃ¡quina. Hoje Ã© possÃ­vel vocÃª escrever um programa para Quarkus e usar o mesmo cÃ³digo para OpenLiberty.

## Instalando tudo...

NÃ£o gaste tempo procurando cada programa... nem mesmo o Java. VocÃª precisa de apenas uma coisa: o [SDKMan!](https://sdkman.io/). Com ele Ã© possÃ­vel instalar qualquer versÃ£o de Java que vocÃª deseja e algumas outras ferramentas como vamos citar mais a frente. 

TambÃ©m recomendo ter uma boa linha de comando. Se vocÃª usa Windows... Errado! Brincadeira! hehehe VocÃª pode usar Windows, tanto que eu uso Windows (nÃ£o por livre e espontÃ¢nea vontade). No Windows vocÃª pode usar o Git Bash que Ã© um porte do MinGW que por sua vez Ã© um porte dos programas GNU para Windows.

Sobre a IDE, escolha a que vocÃª mais gosta. Todas as IDEs relavantes tem suporte a Java. VocÃª precisa de uma IDE porque Ã© mais fÃ¡cil desenvolver usando ferramentas para fazer a marcaÃ§Ã£o da linguagem (_o famoso code highlight_) e para propor cÃ³digo (_o famoso auto-complete_). Desenvolvedores experientes preferem comodidade porque os problemas jÃ¡ sÃ£o complexos demais para ficar perdendo tempo. Eu recomendo usar ou o Eclipse, ou o Intellij Idea ou o VS Code. As trÃªs IDEs sÃ£o boas.

Logo em resumo, o que vocÃª precisa Ã©:

* SDKMan!
* Maven
* Java
* Uma boa IDE 

## Construindo meu primeiro programa Java

EntÃ£o agora que vocÃª sabe que o Java Ã© mais que uma linguagem, vamos escrever nosso primeiro cÃ³digo Java?

O erro mais comum de quem vai comeÃ§ar em Java Ã© baixar uma IDE e criar um projeto Java. ğŸ¤¯ Eu fiz isso por muito tempo, atÃ© descobrir que Ã© sÃ³ dor de cabeÃ§a. Ã‰ mais fÃ¡cil vocÃª usar o Maven ou o Gradle. Eu uso Maven por comodidade, jÃ¡ tive vontade de aprender Gradle, mas... Bom... 

Com o Maven vocÃª pode facilmente criar um projeto Java e compilar ele independente de IDE. O Maven tambÃ©m vai se encarregarÃ¡ de encontrar todas as depÃªncias em suas versÃµes e dependÃªncias. EntÃ£o para criar um projeto Java basta criar um arquivo `pom.xml` e um arquivo Java, como na estrutura abaixo.

```
.
â”œâ”€â”€ src
â”‚   â””â”€â”€ main
â”‚       â””â”€â”€ java
â”‚           â””â”€â”€ io
â”‚               â””â”€â”€ vepo
â”‚                   â””â”€â”€ helloworld
â”‚                       â””â”€â”€ HelloWorld.java
â””â”€â”€ pom.xml
```

Para quem nÃ£o conhece o Maven (_dÃª uma olhada nesse [simples tutorial](https://github.com/dev-roadmap/backend-roadmap/blob/main/caso-de-uso-00-configurando-um-projeto-quarkus.md)_), ele vai gerenciar a build do seu projetos Java. O arquivo `pom.xml` vai conter as informaÃ§Ãµes bÃ¡sicas do projeto e as dependÃªncias. VocÃª pode achar estranha a estrutura de diretÃ³rios, mas ela Ã© bastante Ãºtil para evitar configuraÃ§Ãµes. O Maven atua por um padrÃ£o chamado [ConvenÃ§Ã£o sobre configuraÃ§Ã£o](https://pt.wikipedia.org/wiki/Conven%C3%A7%C3%A3o_sobre_configura%C3%A7%C3%A3o), ao invÃªs de colocar todas as configuraÃ§Ãµes do projeto, basta seguir essa regrinha bÃ¡sica de estrutura de diretÃ³rios.

Para encontrar dependÃªncias Maven, Ã© possÃ­vel procurar no mvnrepository.com. Cada dependÃªncia Ã© definida pelas coordenadas `groupId`, `artifactId` e `version` e elas podem ser encontradas diretamente no mvnrepository.com, como Ã© o caso do Kafka Clientes [mvnrepository.com/artifact/org.apache.kafka/kafka-clients](https://mvnrepository.com/artifact/org.apache.kafka/kafka-clients). Observe o padrÃ£o da URL, `mvnrepository.com/artifact/{groupId}/{artifactId}`. Ã‰ possÃ­vel tambÃ©m adicionar a versÃ£o na URL `mvnrepository.com/artifact/{groupId}/{artifactId}/{version}`. Isso facilita a busca pode dependÃªncias.

Para facilitar na execuÃ§Ã£o, jÃ¡ estou colocando o plugin `org.codehaus.mojo:exec-maven-plugin` corretamente configurado para apontar para a classe `io.vepo.helloworld.HelloWorld`, assim para executar basta usar `mvn clean compile exec:java`.

```xml
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>

    <groupId>io.vepo.helloworld</groupId>
    <artifactId>hello-world</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <name>Hello World!</name>
    <properties>
        <java.version>18</java.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <maven.compiler.parameters>true</maven.compiler.parameters>

        <maven.compiler.source>${java.version}</maven.compiler.source>
        <maven.compiler.target>${java.version}</maven.compiler.target>
    </properties>


    <dependencyManagement>
        <dependencies></dependencies>
    </dependencyManagement>
    <dependencies>
        <!-- Procure as dependÃªncias no mvnrepository.com -->
    </dependencies>
    <build>
        <finalName>hello-world</finalName>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>3.0.0</version>
                <configuration>
                    <mainClass>io.vepo.helloworld.HelloWorld</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>
```

Observe como Ã© simples... Com isso todas as configuraÃ§Ãµes ficam disponÃ­veis em um Ãºnico arquivo que pode ser usado pela sua IDE preferida.

Agora Ã© sÃ³ criar a classe como o exemplo abaixo e pronto! Execute `mvn clean compile exec:java` e vocÃª verÃ¡ o resultado na tela.

```java
package io.vepo.helloworld;

public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello World!");
    }
}
```

Agora caso vocÃª queira criar um programa usando um framework... Eu recomendo vocÃª procurar o tutorial desse framework. Talvez vocÃª precisarÃ¡ escrever um `main` especÃ­fico ou mesmo usar um conjunto de anotaÃ§Ãµes.

## PrÃ³ximos passos

Agora que vocÃª sabe como escrever e executar um programa Java, vocÃª pode conhecer um pouco mais da sintaxe da linguagem. Ela Ã© baseada na linguagem C, mas tem algumas especificadades... Eu recomendei o tutorial do [W3CSchools](https://www.w3schools.com/java/java_syntax.asp) por ter ao menos uma listagem das principais construÃ§Ãµes do Java 8. Tente saber como declarar uma classe, um mÃ©todo, variÃ¡veis, quais sÃ£o as principais estruturas de loop (`for` e `while`) e suas variaÃ§Ãµes e por fim as estruturas lÃ³gicas (`if` e `switch`).

Depois conheÃ§a ao menos alguns dos pacotes bÃ¡sicos da linguagem, a [documentaÃ§Ã£o](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/module-summary.html) estÃ¡ disponÃ­vel na internet. Eu recomendo que vocÃª comece pelo pacote [`java.util`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/package-summary.html) ele vai conter as classes bÃ¡sicas de coleÃ§Ãµes. No prÃ³ximo post vamos focar exatamente nela!
