---
title: A very simple Test Driven Development Tutorial
layout: default
description: Some small tips for who wants to beggan with TDD
tags: [Testing, Java, Test, TDD]
cover_image: https://thepracticaldev.s3.amazonaws.com/i/jkocbutap8qvhdod7jbv.jpg
date: 2019-03-28 10:52:47 +0300
published: 2019-07-24 15:32:22 +0300
series: Thoughts on TDD
comments: true
original: "https://dev.to/vepo/a-very-simple-test-driven-development-tutorial-3309"
replicated: ["https://medium.com/@vepo/a-very-simple-test-driven-development-tutorial-d11d22276bad"]
---

<p>Now I'm addicted with Test Driven Development, but... Somewhere in the past I thought it was a bad idea. Now I can't develop any code without this technique.</p>

<!--more-->

<p>In this post I will present some steps to starting using TDD in your daily work.</p>

<h2>Tips</h2>

<h3>Tip 1: Know which tools you must use</h3>

<p>Which language you use? I work mostly using Java and for many years I never heard about Maven and how integrate Maven with JUnit. So JUnit without Maven or Gradle or any other building tool is nothing! <i>Nobody in the company I was working kwen Maven or any building tool... It was some kind of amateur craftsmanship software</i>.</p>

<p>When I was introduced to Maven, after some years using Gradle by my own, I only asked: <i>"Ok. It make the build, run the tests and make the application deployable?</i>". That was I was looking for! ðŸ˜€</p>

<p>When start a new project make a roadmap:
<ol>
    <li>Setup building tool: <i>Maven or Gradle for Java</i></li>
    <li>Configure the Testing tool: <i>Why not using JUnit 5</i></li>
    <li>Create your first Test with an assert and check if works!</li>
</ol></p>

<h3>Tip 2: Know the TDD Cycles</h3>

<p>Red, Green, Refactor! This makes senses? No, so <a href="https://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html">read about it!</a> This is the way you will develop using TDD. Write a falling test, write the code for make the test works and refactor it. </p>

<p>Until the test works, do not worry about replicated code, or bad smells, or if your code is good and beautiful! Just solve the problem. This is not the moment for that.</p>

<p>Make small steps. Do not worry about write the full feature before tests. Test every step of your code. If you should save a entity on your database, first save it, then test every kind of input for this entity, then write all business rules. It is a waste of time write the full feature and then tests. Making small steps you can fix an error before it gets bigger, and you make sure that the code you wrote a hour ago works well.</p>

<h3>Tip 3: Validate your code</h3>

<p>What means pass the test? For a development team a work with, it means giving a Coverage Report with at least 80%! Is that correct? No! You should validate what you have done.</p>

<script src="https://gist.github.com/vepo/4afeaf1ca1fe54bb9a1eed5d43b41477.js"></script>

<h3>Tip 4: Know Good Test Libraries</h3>

<p>Mockito, AssertJ, To String Verifier, etc... This will help you. Trust in me! Do not reinvent a library, reuse. There is a lot of good libraries for tests.</p>

<h3>Tip 5: Organize your code for testing</h3>

<p>Write your production code thinking who can you test it. </p>

<p>Imagine that you have a code with a lot of Services Consumers and Providers (Kafka, *MQ, Aws*, Google*, etc..). Every time you create a new producer or consumer, it should be created by the same piece of code! When you do it, it is easy to create a Mock for this class. If you have a KafkaClientFactory, you do need to worry about a new KafkaProducer, just use Mockito to mock KafkaClientFactory and be happy</p>

<p>How to build a Singleton?</p>

<script src="https://gist.github.com/vepo/7d25219a34f3d9376cb7cd136826283e.js"></script>

Is this implementation good? No! Why? If I want to cleanup this singleton and recreated? How can I access the field <code>ref</code>? You can't! You have to options, or you let the field <code>ref</code> as a <code>package private</code> or you create a cleanup method as package private, and create a SomeSingletonHelper in the same package as a code test to reset all values.

The intention is thinking, how can I test my code when you are writing the code.

<h3>Tip 6: Know the input and output</h3>

<p>When creating tests, you should known with type of input your code will received, and which type of output should provide. Use known inputs, not only auto-generated. This helps you to make sure its working</p>

<h3>Tip 7: Use real inputs</h3>

<p>Use real inputs, not only generated/dummy inputs. Found a production bug? Get what input produces the bug, create a test with it!</p>

<h3>Tip 8: Testing language</h3>

<p>Create a Test DSL for your code.</p>

<script src="https://gist.github.com/vepo/1e7f73dacc791ead30fc5bc90fd9d306.js"></script>

<p>Compare the code above with the code bellow</p>


<script src="https://gist.github.com/vepo/83c0529089b2648cd402a7c156889aab.js"></script>

<p>Build a High Level <a href="https://en.wikipedia.org/wiki/Given-When-Then">Given-When-Then</a> library for your code</p>

<h2>Conclusion</h2>

<p>Testing is not a waste of time! When you had never done TDD you will think that, but with TDD you use better your time.</p>