<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" type="image/png" href="/icon.png" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@vepo">
  <meta name="twitter:creator" content="@vepo">
  <meta name="google-site-verification" content="xw_kgncLhv22qVjTIPi7adALZre8FIHY02-DGCuYuZ4" />
  
  <!-- SEO stuff -->
  
  <title>Quarkus Tutorial: Using Bean Validation on Quarkus.io</title>
  <meta property="og:title" content="Quarkus Tutorial: Using Bean Validation on Quarkus.io" />
  <meta name="twitter:title" content="Quarkus Tutorial: Using Bean Validation on Quarkus.io">
  


  
  <meta name="description" content="A minimal how-to of how to use Bean Validation on Quarkus.io" />
  <meta property="og:description" content="A minimal how-to of how to use Bean Validation on Quarkus.io" />
  <meta name="twitter:description" content="A minimal how-to of how to use Bean Validation on Quarkus.io">
  

  
  <meta name="keywords" content="Quarkus, Java, Bean Validation, Hibernate">
  

  <link rel="canonical" href="https://vepo.github.io/posts/using-bean-Validation-on-quarkus" />
  <meta property="og:url" content="https://vepo.github.io/posts/using-bean-Validation-on-quarkus" />
  <meta name="twitter:url" content="https://vepo.github.io/posts/using-bean-Validation-on-quarkus">

  <meta property="og:site_name" content="Notas do dia a dia de um engenheiro de software" />

  
  <meta property="og:image" content="https://vepo.github.io/assets/images/data-center.jpg" />
  <meta name="twitter:image" content="https://vepo.github.io/assets/images/data-center.jpg">
  

  
  <!-- if it's an article -->
  <meta property="og:type" content="article" />
  
  <meta property="article:published_time" content="2021-01-25T08:00:00+00:00" />
  <meta property="article:modified_time" content="2021-01-25T08:00:00+00:00" />
  

  <meta content="https://www.linkedin.com/in/victorosorio/" property="article:author">

  
  
  

  
  
  <meta content="Quarkus" property="article:tag">
  
  <meta content="Java" property="article:tag">
  
  <meta content="Bean Validation" property="article:tag">
  
  <meta content="Hibernate" property="article:tag">
  
  

  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "headline": "Using Bean Validation on Quarkus.io",
      "datePublished": "2021-01-25T08:00:00+00:00",
      
      "description": "A minimal how-to of how to use Bean Validation on Quarkus.io",
      
      
      "url": "https://vepo.github.io/posts/using-bean-Validation-on-quarkus"
    }
  </script>

  

  <link rel="author" href="https://www.linkedin.com/in/victorosorio/" />

  <!-- End SEO stuff -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
  <link href="/assets/thirdy-party/fontawesome/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link href="/assets/css/syntax.css" rel="stylesheet">
  
  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/thirdy-party/fontawesome/js/all.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
</head>

<body>
    <div class="d-flex">
        <div class="menu">
        <script async src="/assets/js/menu.js"></script>
<div class="enabler">
	<li class="nav-item">
		<a class="nav-link" aria-current="page" href="/">
			Conteúdo&nbsp;<i class="fa fa-fist-raised"></i>
		</a>
	</li>
</div>
<div class="nav flex-column">
	<li class="nav-item">
		<a class="nav-link" aria-current="page" href="/">
			Victor Osório&nbsp;<i class="fa fa-fist-raised home"></i>
		</a>
	</li>
	
		
		<li class="nav-item">
			<a class="nav-link" aria-current="page" href="#" 
			   data-bs-toggle="collapse" data-bs-target="#container-collapse-pet-projects" 
			   aria-expanded="false" aria-controls="container-collapse-pet-projects" >Pet Projects</a>
			<div class="collapse submenu" id="container-collapse-pet-projects">
				
				<a class="nav-link" aria-current="page" href="/projects/csv-viewer">CSV Viewer</a>
				
				<a class="nav-link" aria-current="page" href="/projects/plain-test">Plain Test</a>
				
				<a class="nav-link" aria-current="page" href="/projects/kafka-tool">Kafka Tool</a>
				
			</div>
		</li>		
		
	
		
		<li class="nav-item">
			<a class="nav-link" aria-current="page" href="#" 
			   data-bs-toggle="collapse" data-bs-target="#container-collapse-apresentações" 
			   aria-expanded="false" aria-controls="container-collapse-apresentações" >Apresentações</a>
			<div class="collapse submenu" id="container-collapse-apresentações">
				
				<a class="nav-link" aria-current="page" href="/presentations/2020-03-26-sou-java-kafka">Kafka: Uma introdução para Desenvolvedores e Arquitetos</a>
				
				<a class="nav-link" aria-current="page" href="/presentations/2019-09-14-sou-java-cdi">Usando Java CDI em projetos Jakarta EE ou Microprofile</a>
				
				<a class="nav-link" aria-current="page" href="/presentations/2021-08-26-a-filosofia-do-design-de-codigo">A Filosofia do Design de Código</a>
				
				<a class="nav-link" aria-current="page" href="/presentations/2021-06-10-diversidade-cultural">Diversidade Cultural? E isso importa?</a>
				
			</div>
		</li>		
		
	
		
		<li class="nav-item">
			<a class="nav-link" aria-current="page" href="/">Posts</a>
		</li>
		
	
		
		<li class="nav-item">
			<a class="nav-link" aria-current="page" href="/tags">Tags</a>
		</li>
		
	
		
		<li class="nav-item">
			<a class="nav-link" aria-current="page" href="/series">Séries</a>
		</li>
		
	
		
		<li class="nav-item">
			<a class="nav-link" aria-current="page" href="/about">Sobre</a>
		</li>
		
	
		
		<li class="nav-item">
			<a class="nav-link" aria-current="page" href="/books">Livros Recomendados</a>
		</li>
		
	
		
		<li class="nav-item">
			<a class="nav-link" aria-current="page" href="#" 
			   data-bs-toggle="collapse" data-bs-target="#container-collapse-redes-sociais" 
			   aria-expanded="false" aria-controls="container-collapse-redes-sociais" >Redes Sociais</a>
			<div class="collapse submenu" id="container-collapse-redes-sociais">
				
				<a class="nav-link" aria-current="page" href="http://github.com/vepo">GitHub</a>
				
				<a class="nav-link" aria-current="page" href="http://www.linkedin.com/in/victorosorio">LinkedIn</a>
				
				<a class="nav-link" aria-current="page" href="https://twitter.com/vepo">Twitter</a>
				
			</div>
		</li>		
		
	
	<li class="nav-item">
		<a class="nav-link" aria-current="page" href="https://twitter.com/vepo">
			<i class="fab fa-twitter"></i> @vepo
		</a>
	</li>
</div>
<div align="center">
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8088229614848913" crossorigin="anonymous"></script>
	<!-- Homepage Leaderboard -->
	<ins class="adsbygoogle"
		 style="display:inline-block;width:168px;height:90px"
		 data-ad-client="ca-pub-8088229614848913"
	     data-ad-slot="1234567890"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</div>
        </div>
        
        
        <div class="flex-grow-1">
            <div class="container post">
                <div class="title">
    
    <h1 class="serie-title">
        Quarkus Tutorial
    </h1>
    <h2>
        Using Bean Validation on Quarkus.io
    </h2>
    
</div>
<div class="cover-image">
    
    <img alt="Using Bean Validation on Quarkus.io" src="/assets/images/data-center.jpg" class="img-responsive" />
    
</div>
                
                <p>
                    
                    <strong>
                        <time datetime="2021-01-25T08:00:00+00:00">
                            January 25, 2021
                        </time>
                    </strong> 
                    
                </p>
                <div class="tag-container">
                    
                    <a class="label label-default quarkus" href="/tags/#quarkus">Quarkus</a> 
                    
                    <a class="label label-default java" href="/tags/#java">Java</a> 
                    
                    <a class="label label-default bean-validation" href="/tags/#bean-validation">Bean Validation</a> 
                    
                    <a class="label label-default hibernate" href="/tags/#hibernate">Hibernate</a> 
                    
                </div>
                    
                    
                <hr> 
                
                
<div class="series">
    <div class="serie-contents">
        
        <h2>
            Quarkus Tutorial<br/>
            <span class="description">(série de 3 partes)</span>
        </h2>
        
            
            <a href="/posts/quarkus-rest-api">
                <div class="serie-article">How to set up a REST API using Quarkus.io</div>
            </a>
            
        
            
            <a href="/posts/configure-jpa-on-quarkus">
                <div class="serie-article">Configure JPA on Quarkus.io</div>
            </a>
            
        
            
            <div class="serie-article selected">Using Bean Validation on Quarkus.io</div>
            
        
    </div>
</div>

                <article>
                    <p><a href="https://beanvalidation.org/latest-draft/spec/">Jakarta Bean Validation</a> is a very useful specification. I can’t find any reason to do not use it. If you know, please share with me.</p>

<h2 id="the-worst-way-to-do-it">The worst way to do it</h2>

<p>Validation is a boring feature. It is important, but most of the time it pollutes the code. You have to check function by function if all values are according to the expected.</p>

<p>So, let’s imagine the in the code of our Step 02 we need to validate that the <code class="language-plaintext highlighter-rouge">username</code> is a String not empty, with a minimum size of 4 and a maximum of 15 and no whitespace. How can we do it?</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@POST</span>
<span class="nd">@Produces</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">User</span> <span class="nf">create</span><span class="o">(</span><span class="nc">CreateUserRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Objects</span><span class="o">.</span><span class="na">requireNonNull</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(),</span> <span class="s">"\"username\" cannot be null!"</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getUsername</span><span class="o">().</span><span class="na">isBlank</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadRequestException</span><span class="o">(</span><span class="s">"\"username\" may not be blank"</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(!</span><span class="n">request</span><span class="o">.</span><span class="na">getUsername</span><span class="o">().</span><span class="na">matches</span><span class="o">(</span><span class="s">"^[a-zA-Z][a-zA-Z0-9]+$"</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadRequestException</span><span class="o">(</span><span class="s">"\"username\" should start with a letter and should only accept letters and numbers"</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getUsername</span><span class="o">().</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="o">||</span> <span class="n">request</span><span class="o">.</span><span class="na">getUsername</span><span class="o">().</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadRequestException</span><span class="o">(</span><span class="s">"\"username\" should have size [4,15]"</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">users</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">User</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                            <span class="o">.</span><span class="na">email</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">username</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getUsername</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">firstName</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getFirstName</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">lastName</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getLastName</span><span class="o">()).</span><span class="na">admin</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">isAdmin</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">hashedPassword</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getHashedPassword</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">build</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Jakarta Bean Validation allow us to remove all this code and replace with simple annotations.</p>

<h2 id="configuring-jpa-in-an-existent-quarkus-project">Configuring JPA in an existent Quarkus Project</h2>

<p>To enable Jakarta Bean Validation, you should add it’s implementation to Quarkus, that is <a href="https://hibernate.org/validator/">Hibernate Validator</a>.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>io.quarkus<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>quarkus-hibernate-validator<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<p>That is all you need! Now you just need to configure where you will use and what fields you want to validate.</p>

<h2 id="requiring-valid-parameters">Requiring Valid Parameters</h2>

<p>The next step, you should inform Quarkus, where you want to use the validate. From the example above, we can remove all validation lines and just add the annotation <code class="language-plaintext highlighter-rouge">javax.validation.Valid</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@POST</span>
<span class="nd">@Produces</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">User</span> <span class="nf">create</span><span class="o">(</span><span class="nd">@Valid</span> <span class="nc">CreateUserRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">users</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">User</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                            <span class="o">.</span><span class="na">email</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">username</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getUsername</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">firstName</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getFirstName</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">lastName</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getLastName</span><span class="o">()).</span><span class="na">admin</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">isAdmin</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">hashedPassword</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getHashedPassword</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">build</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Then we need to inform Quarkus the logic for this validation, it can be done inside CreataUserRequest class. We will use the annotations <code class="language-plaintext highlighter-rouge">Email</code>, <code class="language-plaintext highlighter-rouge">NotBlank</code>, <code class="language-plaintext highlighter-rouge">Pattern</code> and <code class="language-plaintext highlighter-rouge">Size</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.validation.constraints.Email</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.validation.constraints.NotBlank</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.validation.constraints.Pattern</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.validation.constraints.Size</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CreateUserRequest</span> <span class="o">{</span>

    <span class="nd">@Email</span>
    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"email may not be blank"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>

    <span class="nd">@Size</span><span class="o">(</span><span class="n">min</span> <span class="o">=</span> <span class="mi">4</span><span class="o">,</span> <span class="n">max</span> <span class="o">=</span> <span class="mi">15</span><span class="o">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"username should have size [{min},{max}]"</span><span class="o">)</span>
    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"username may not be blank"</span><span class="o">)</span>
    <span class="nd">@Pattern</span><span class="o">(</span><span class="n">regexp</span> <span class="o">=</span> <span class="s">"^[a-zA-Z][a-zA-Z0-9]+$"</span><span class="o">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"\"username\" should start with a letter and should only accept letters and numbers"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>

    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"firstName may not be blank"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">firstName</span><span class="o">;</span>

    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"lastName may not be blank"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">lastName</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">admin</span><span class="o">;</span>

    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"hashedPassword may not be blank"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">hashedPassword</span><span class="o">;</span>

    <span class="c1">// [Getters and Setters]</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This can be used in any Managed Bean inside Quarkus, but if you used on Endpoints it will enable HTTP validation returning a Bad Request response, as we can see in the response bellow. This is not a good way to present errors on a REST API, but at least follow some patterns as returning the correct HTTP Status Code and informing all constraint violations.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"classViolations"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"parameterViolations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"constraintType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PARAMETER"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\"</span><span class="s2">username</span><span class="se">\"</span><span class="s2"> should start with a letter and should only accept letters and numbers"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create.request.username"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2vepo"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"propertyViolations"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"returnValueViolations"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>If you need to add validation for a parameter that you do not implement the class, like a <code class="language-plaintext highlighter-rouge">String</code> or a primitive type, you can use the annotations directly on the bean parameter. In this case, you can omit the <code class="language-plaintext highlighter-rouge">Valid</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nd">@Size</span><span class="o">(</span><span class="n">min</span> <span class="o">=</span> <span class="mi">4</span><span class="o">,</span> <span class="n">max</span> <span class="o">=</span> <span class="mi">15</span><span class="o">)</span> <span class="nc">String</span> <span class="n">username</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">TypedQuery</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">"User.findByUsername"</span><span class="o">,</span> <span class="nc">User</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">query</span><span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="n">username</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">query</span><span class="o">.</span><span class="na">getResultStream</span><span class="o">().</span><span class="na">findFirst</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="creating-custom-validations">Creating Custom Validations</h2>

<p>Now that we are able to use the Built-in validations, let’s create some custom validators. First, we need to define the annotation for it. It should have the following pattern.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Documented</span>
<span class="nd">@Constraint</span><span class="o">(</span><span class="n">validatedBy</span> <span class="o">=</span> <span class="nc">ReservedWordValidator</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@Target</span><span class="o">({</span>
    <span class="no">METHOD</span><span class="o">,</span>
    <span class="no">FIELD</span><span class="o">,</span>
    <span class="no">ANNOTATION_TYPE</span><span class="o">,</span>
    <span class="no">CONSTRUCTOR</span><span class="o">,</span>
    <span class="no">PARAMETER</span><span class="o">,</span>
    <span class="no">TYPE_USE</span> <span class="o">})</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="no">RUNTIME</span><span class="o">)</span>
<span class="nd">@Repeatable</span><span class="o">(</span><span class="nc">ReservedWords</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@SupportedValidationTarget</span><span class="o">(</span><span class="no">ANNOTATED_ELEMENT</span><span class="o">)</span>
<span class="nd">@ReportAsSingleViolation</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">ReservedWord</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">value</span><span class="o">();</span>

    <span class="nc">String</span> <span class="nf">message</span><span class="o">()</span> <span class="k">default</span> <span class="s">"You are using a Reserved Word"</span><span class="o">;</span>

    <span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Payload</span><span class="o">&gt;[]</span> <span class="nf">payload</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

    <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">groups</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>
<span class="o">}</span>
</code></pre></div></div>

<p>In our case, we are creating a <code class="language-plaintext highlighter-rouge">Repeatable</code> just for an example, but you can set any kind of Type for value. Then we need to declare and implement the Validator. As you can see, we are already linking the Validator with the Annotation using <code class="language-plaintext highlighter-rouge">@Constraint(validatedBy = ReservedWordValidator.class)</code>, now we only need to implement it.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReservedWordValidator</span> <span class="kd">implements</span> <span class="nc">ConstraintValidator</span><span class="o">&lt;</span><span class="nc">ReservedWord</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">word</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="nc">ReservedWord</span> <span class="n">wordAnnotation</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">word</span> <span class="o">=</span> <span class="n">wordAnnotation</span><span class="o">.</span><span class="na">value</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span><span class="o">,</span> <span class="nc">ConstraintValidatorContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">compareToIgnoreCase</span><span class="o">(</span><span class="n">word</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>Now you can use it in your service.</p>

<h2 id="executing-and-testing">Executing and Testing</h2>

<p>With the database running you only need to start the Quarkus using maven.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn quarkus:dev
</code></pre></div></div>

<p>In our example, we have provided 2 endpoints where you can test with valid and invalid parameters.</p>

<ul>
  <li>Create an User: <code class="language-plaintext highlighter-rouge">POST /user</code></li>
  <li>Find User by Username: <code class="language-plaintext highlighter-rouge">GET /user/{username}</code></li>
</ul>

<p><a href="https://app.getpostman.com/run-collection/f9fc24e64abbfb3aac90"><img src="https://run.pstmn.io/button.svg" alt="Run in Postman" /></a></p>

<p>You can find all the code on github.com/vepo/quarkus-tutorial.</p>

<div class="github-repo">
    <h2>
        <img class="logo" src="/assets/images/plugins/github-logo.png" alt="GitHub logo" loading="lazy" />
        <img class="user" src="https://avatars.githubusercontent.com/u/353569?v=4" loading="lazy" />
        <span class="url">
            <a href="https://github.com/vepo">
                vepo
            </a> 
            /
            <a href="https://github.com/vepo/quarkus-tutorial">
                quarkus-tutorial
            </a>
        </span>
    </h2>
</div>

<h2 id="design-by-contract">Design by Contract</h2>

<p>The most important concept on Validating parameters is <strong>Design By Contract</strong>. A contract defines your rights and responsibility, if you define a contract you will not handle values outside that contract. And using Bean Validation enables you to implement Orthogonal Contracts, keeping your code clear. You do not mix validation with business logic. And you don’t need to replicate code, only adding an annotation you can spread validation in all your Managed Beans.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Quarkus is easy to configure. You can remove a lot of code, only creating validations.</p>

<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/e65xl1069bgqs8ge87wm.jpg" alt="Man drawing a Software Architecture diagram" />
Foto de Startup Stock Photos no Pexels</p>

                </article>
                
<div class="series">
    <div class="serie-contents">
        
        <h2>
            Quarkus Tutorial<br/>
            <span class="description">(série de 3 partes)</span>
        </h2>
        
            
            <a href="/posts/quarkus-rest-api">
                <div class="serie-article">How to set up a REST API using Quarkus.io</div>
            </a>
            
        
            
            <a href="/posts/configure-jpa-on-quarkus">
                <div class="serie-article">Configure JPA on Quarkus.io</div>
            </a>
            
        
            
            <div class="serie-article selected">Using Bean Validation on Quarkus.io</div>
            
        
    </div>
</div>

                
                <div class="published">
                    
                    <div>Originally published January 25, 2021</div>
                    
                </div>

                
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                         
                     
                         
                     
                         
                     
                 
                     
                         
                     
                        
                        
                         
                 
                     
                         
                     
                        
                        
                         
                
                
                <div class="related-posts">
                    <div class="related-post-header">Posts relacionados</div>
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/java-101">
                                
                                    Java 101: Como começar a aprender Java
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/java-e-clocks">
                                
                                    Java & Clocks
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/criando-um-servico-linux">
                                
                                    Aprendendo Linux: Criando um serviço Linux
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/tipos-objetos-e-clones">
                                
                                    Tipos, Objetos e Clones
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/criando-um-stream-em-java">
                                
                                    Criando um Stream em Java
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/context-and-dependency-injection-cdi-2-0">
                                
                                    Especificações Jakarta EE & Microprofile.io: Contexts and Dependency Injection (CDI) 2.0
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/configure-jpa-on-quarkus">
                                
                                    Quarkus Tutorial: Configure JPA on Quarkus.io
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/quarkus-rest-api">
                                
                                    Quarkus Tutorial: How to set up a REST API using Quarkus.io
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/testes-101-testando-aplicações-java">
                                
                                    Level Up: Testes 101 - Testando aplicações Java
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/devops-como-comecar">
                                
                                    Coisas que todo Sênior deve saber: DevOps! Como começar?
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/s-o-l-i-d-a-solida-base-para-orientacao-a-objeto">
                                
                                    Coisas que todo Sênior deve saber: S.O.L.I.D.: A sólida base para Orientação a Objeto
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/anatomia-de-um-topico">
                                
                                    Entendendo o Kafka: Anatomia de um Tópico
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/deixando-rastros-ou-como-usar-log">
                                
                                    Coisas que todo Sênior deve saber: Deixando rastros, ou como usar log
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/trabalhando-com-dinheiro">
                                
                                    Coisas que todo Sênior deve saber: Trabalhando com dinheiro!
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/como-criar-uma-linguagem-usando-antlr4-e-java">
                                
                                    Como criar uma linguagem usando ANTLR4 e Java
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/escolhendo-uma-implementacao-jakarta-ee-e-microprofile-io">
                                
                                    Especificações Jakarta EE & Microprofile.io: Escolhendo uma implementação Jakarta EE & Microprofile.io
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/jakarta-ee-e-microprofile-io">
                                
                                    Especificações Jakarta EE & Microprofile.io: Jakarta EE e Microprofile.io
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/tests-and-requirements">
                                
                                    Thoughts on TDD: Tests and Requirements
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                             
                         
                             
                         
                             
                         
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/java-memory-leak-for-jdbc">
                                
                                    Java Memory Leak for JDBC
                                
                        </a>
                    </div>
                                 
                     
                         
                             
                         
                            
                    <div class="related-post-item">
                        <a href="/posts/a-very-simple-test-driven-development-tutorial">
                                
                                    Thoughts on TDD: A very simple Test Driven Development Tutorial
                                
                        </a>
                    </div>
                                 
                    
                 
                </div>
                 
                <div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://notas-do-dia-a-dia-de-um-engenheiro-de-software.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <!-- Twitter universal website tag code -->
<script>
  !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
  },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
  a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
  // Insert Twitter Pixel ID and Standard Event data below
  twq('init','o5djb');
  twq('track','PageView');
  </script>
  <!-- End Twitter universal website tag code -->
            </div>
        </div>
    </div>
 
    <footer class="footer">
	<ul class="footer-links">
		<li>
			<div>
				<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js"
					data-name="bmc-button" data-slug="vepo" data-color="#5F7FFF" data-emoji="" data-font="Cookie"
					data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#ffffff"
					data-coffee-color="#FFDD00"></script>
			</div>
		</li>
		<li>
			<a href="http://github.com/vepo"> 
				<i class="fab fa-github fa-inverse fa-3x"></i>
			</a>
		</li>
		<li>
			<a href="http://www.linkedin.com/in/victorosorio">
				<i class="fab fa-linkedin-in fa-inverse fa-3x"></i>
			</a>
		</li>
		<li>
			<a href="https://twitter.com/vepo">
				<i class="fab fa-twitter fa-inverse fa-3x"></i>
			</a>
		</li>
		<li>&nbsp;</li>
	</ul>
</footer>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-166943279-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'UA-166943279-1');
</script> 
    <script src="/assets/js/adjustments.js" async></script>
</body>

</html>